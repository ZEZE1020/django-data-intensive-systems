[pytest]
# Pytest configuration file
# This file overrides pyproject.toml settings and provides pytest-specific options.
# Reference: https://docs.pytest.org/en/stable/pythonpath.html

DJANGO_SETTINGS_MODULE = config.settings.development

# Test discovery patterns
python_files = tests.py test_*.py *_tests.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths = tests

# Output and reporting options
addopts = 
    --strict-markers
    --strict-config
    --cov=apps
    --cov-report=html
    --cov-report=term-missing:skip-covered
    --cov-fail-under=80
    -v
    --tb=short

# Markers for test categorization
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests requiring external services
    unit: marks tests as unit tests (fast, isolated)
    models: marks tests for Django models
    views: marks tests for Django views and viewsets
    api: marks tests for API endpoints
    serializers: marks tests for DRF serializers
    celery: marks tests for Celery tasks
    db: marks tests that require database access (automatically added by pytest-django)
    asyncio: marks tests as async tests

# Ignore warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Database: use in-memory SQLite for tests by default (faster)
# Override with --ds=config.settings.test_postgres for PostgreSQL tests
# See: https://pytest-django.readthedocs.io/en/latest/

# Coverage settings (integrated from pyproject.toml)
# Run coverage on apps/ directory only, exclude migrations
